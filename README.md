# rsa-chat-server

### Что это?

Это учебный socket-сервер для обмена текстовыми сообщениями с использованием end-to-end шифрования.

### Шифрование

Используется как шифрование данных между сервером и клиентом, так и шифрованием сообщений, передаваемых клиентами через сервер. Сообщения клиентов сохраняются в базе данных, но ключ расшифровки известен только получателю.

Подразумевается использование "чистого RSA" (без отступов) c 1024 битным ключом.

### Протокол

Сервер работает в пасивном режиме, отвечает на запросы клиентов.

* Для отправки незашифрованных сообщений (обмен ключами) сначала передаются 4 байта, содержащие размер данных, а затем сами данные.
* Для отправки зашифрованных сообщений, состоящих из нескольких блоков, сначала передаются 4 байта, содержащие количество блоков, а затем сами блоки, каждый из которых описывается 4мя байтами размера, а затем содержимым блока.

**Последовательность действий:**

- обмен ключами;
- регистрация (при первом подключении);
- отправка команд на получение списка пользователей / отправку / получение сообщений.ъ





